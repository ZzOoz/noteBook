旧岛小程序前端总结

## 1.bind和catch绑定事件区别

1. 冒泡事件：当一个组件上的事件被触发后，该事件会向父节点传递。
2. 非冒泡事件：当一个组件上的事件被触发后，该事件不会向父节点传递。

除 `bind` 外，也可以用 `catch` 来绑定事件。与 `bind` 不同， `catch` 会阻止事件向上冒泡。



## 2.不要在组件内的properties属性中的obverse函数中使用setData更改属性本身的值

原因：极易引起无限递归



## 3.wx:if和hidden的比较

### `wx:if` vs `hidden`

因为 `wx:if` 之中的模板也可能包含数据绑定，所以当 `wx:if` 的条件值切换时，框架有一个局部渲染的过程，因为它会确保条件块在切换时销毁或重新渲染。

同时 `wx:if` 也是**惰性的**，如果在初始渲染条件为 `false`，框架什么也不做，在条件第一次变成真的时候才开始局部渲染。

相比之下，`hidden` 就简单的多，组件始终会被渲染，只是简单的控制显示与隐藏。

一般来说，`wx:if` 有更高的切换消耗而 `hidden` 有更高的初始渲染消耗。因此，如果需要频繁切换的情景下，用 `hidden` 更好，如果在运行时条件不大可能改变则 `wx:if` 较好。



**同时要注意的是：if每次切换组件时会触发组件的deattached生命周期，而hidden并不会触发，因为hidden第一次初始化已经好了，而hidden只会在整个程序停止退出才会触发**





## 4.对promise

###### 4.1.在看待promise时，应该将promise看作一个对象（Es6的一个类）而不是一个函数,因为对象可以保存状态，而函数（闭包除外）一般来说是不能保存状态的





## 5.获取用户信息（详细过程）

#### 1.open-data标签可以获取用户的信息，但是不会返回给服务器（使用type来定义类型）

#### 2.使用button标签，定义open-type类型 绑定getuserinfo方法



使用wx.getSetting方法可以知道用户是否已经授权

```
wx.getu
```

