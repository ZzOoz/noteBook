# H5响应式方案

1、http://github.com/amfe/lib-flexible

2、对视图进行放大缩小

3、rem+flex的布局方式

4、媒体查询+百分比+flex

## 使用rem布局方案

### 1、viewport 视窗：设备屏幕用来展示网页可视化区域的地方

使用:

```html
// device-width 网页宽度等于设备宽度
// initial-scale 规定页面的初始缩放比例
// maximum-scale 规定页面的最大缩放比例 通常使用了rem布局就是1.0了 不能缩放1.0以上这种响应式布局方式 也就是上面的第二种方案
// minimum-scale 规定页面的最小缩放比例
// user-scalable 规定是否允许用户进行拖动缩放 yes OR no
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
```



### 2、物理像素和逻辑像素和dpr

物理像素：指的是真实设备的像素，如ipone6：750*1334

逻辑像素：指的是浏览器上渲染的像素，如iphone6：375*667

**物理像素越高，渲染的网页越高清，就是因为网页的渲染目标就只有这么多，而物理像素多出来的像素可以填充逻辑像素的质量，所以就是如此**

dpr：就是物理像素和逻辑像素的比例 如iphone6的dpr就是2，那么就需要使用的ui图就尽可能使用2倍图

**ui设计师是基于物理像素（真实设备）设计图片的，前端工程师是基于逻辑像素开发页面的**



### 3、具体思路

1、动态改变html的font-size值，页面元素使用rem布局，html默认大小是16px

2、设置基准值为100px

3、屏幕宽度/750 * 100 = html的font-size的值

(如果是ipone6那么就是以逻辑像素：375/750 * 100 = 50px，也就是html的font-size是50px，2rem = 100px)



## **具体示例**

在vue的index.html**文件内：**

```html
  <script>
    // 获取设别的宽度 这里宽度是逻辑像素
    var width = document.documentElement.clientWidth
    // 计算公式获取比例
    var n = width / 750 * 100
    // 设置html的font-size值
    document.documentElement.style.fontSize = n + 'px'
  </script>
```



## 微信h5授权流程

### 1、基本概念

**业务域名：**即微信与自身服务器进行相互认证的域名，如果没有设置业务域名，那么在自身公众号输入一些文本框的时候会出现"防欺诈"等字样

**js安全接口域名：**即当我们需要调用微信相关的sdk接口的时候需要设置该域名，如果没有设置改域名是无法调用的

**网页授权域名：**用户在网页授权页同意授权给公众号后，微信会将授权数据传给一个回调页面，回调页面需要在此域名下，确保安全可靠

**网页授权access_token**：用于网页授权时候使用，获取用户的头像、昵称

**普通access_token：**其他接口都是用access_token



### 2、授权

#### 前端h5授权流程

##### 实现过程

· 用户同意授权，获取code

· 通过code换取网页授权access_token

· 拉取用户信息(需scope为snsapi_userinfo)

**注意：静默授权只获取openID，用户信息授权是会获取到用户的头像昵称的**

```javascript
// 请求的地址
window.location.href = `https://open.weixin.qq.com/connect/oauth2/authorize?appid=${appId}&redirect_uri=${redirectUrl}&response_type=code&scope=${scope}&state=STATE#wechat_redirect`

```



#### 后端h5授权过程(以node为例)、

安装两个插件request和memory-cache

**request：调用第三方接口的插件**

**memory-cache：变量缓存的插件**（简化操作，实际上是代替redis从里面获取数据）

```javascript
npm i request memory-cache
```



##### 实现过程：

· 微信授权跳转

· 根据回传回来的code码获取微信那边的openId信息

· 向客户端写入cookie



### 3、jssdk调用流程

· 绑定域名

· 引入js文件

· 通过config接口注入权限验证配置（接口签名）

· 通过ready接口处理成功验证



### 4、h5接入微信

· 定义请求地址

· 微信授权、注入openId

· 获取签名信息配置config

· 定义分享的公共信息



# PC响应式方案（多为结合一起使用）

1、媒体查询

2、flex弹性布局

3、栅格布局